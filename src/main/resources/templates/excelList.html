<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
<!--    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">-->
    <style>
        .button {
          border: none;
          color: white;
          padding: 15px 32px;
          text-align: center;
          text-decoration: none;
          display: inline-block;
          font-size: 16px;
          margin: 4px 2px;
          cursor: pointer;
        }
    </style>
</head>
<body>

    <div style = "width:35%; float:left; padding:20px;" >
        <table class="table table-bordered" id="table1" >
            <thead>
            <tr>
                <th scope="col">번호</th>
                <th scope="col">영문필드명</th>
                <th scope="col">한글필드명</th>
                <th scope="col">길이</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="data : ${data1}" >
                <td scope="row" th:text="${data.no}"></td>
                <td th:text="${data.english_field}"></td>
                <td th:text="${data.korean_field}"></td>
                <td th:text="${data.length}"></td>
            </tr>
            </tbody>
        </table>
        <br>
        <table class="table table-bordered" id="table2" style="visibility:hidden">
            <thead>
            <tr>
                <th scope="col">번호</th>
                <th scope="col">영문필드명</th>
                <th scope="col">한글필드명</th>
                <th scope="col">길이</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="data : ${commonData1}" >
                <td scope="row" th:text="${data.no}"></td>
                <td th:text="${data.english_field}"></td>
                <td th:text="${data.korean_field}"></td>
                <td th:text="${data.length}"></td>
            </tr>
            <tr th:each="data : ${remain1}" >
                <td scope="row" th:text="${data.no}"></td>
                <td th:text="${data.english_field}"></td>
                <td th:text="${data.korean_field}"></td>
                <td th:text="${data.length}"></td>
            </tr>
            </tbody>
        </table>
        <div class="col-lg-12" id="ex1_Result1" ></div>
        <div id = "test" style="width:100px; height:30px;"></div>
    </div>
    <svg><line style="width:50%" id ="line" stroke="red" stroke-width="3"></line></svg>
<!--    <canvas id="canvas" style="width:30%;height:500px;border: 1px solid"></canvas>-->
    <div style = "width:35%; float:right; padding:20px">
        <table class="table table-bordered" id="table3">
            <thead>
            <tr>
                <th scope="col">번호</th>
                <th scope="col">영문필드명</th>
                <th scope="col">한글필드명</th>
                <th scope="col">길이</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="data : ${data2}" >
                <td scope="row" th:text="${data.no}"></td>
                <td th:text="${data.english_field}"></td>
                <td th:text="${data.korean_field}"></td>
                <td th:text="${data.length}"></td>
            </tr>
            </tbody>
        </table>
        <br>

        <br>
        <table class="table table-bordered" id="table4" style="visibility:hidden">
            <thead>
            <tr>
                <th scope="col">번호</th>
                <th scope="col">영문필드명</th>
                <th scope="col">한글필드명</th>
                <th scope="col">길이</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="data : ${commonData2}" >
                <td scope="row" th:text="${data.no}"></td>
                <td th:text="${data.english_field}"></td>
                <td th:text="${data.korean_field}"></td>
                <td th:text="${data.length}"></td>
            </tr>
            <tr th:each="data : ${remain2}" >
                <td scope="row" th:text="${data.no}"></td>
                <td th:text="${data.english_field}"></td>
                <td th:text="${data.korean_field}"></td>
                <td th:text="${data.length}"></td>
            </tr>
            </tbody>
        </table>
        <input type = "button" id="mapping" value="매핑" onclick="drawLine()" style = "width:20%; float:right;"/>
        <input type = "button" id="automapping" value="자동매핑" onclick="visibleTable()" style = "width:20%; float:right;"/>
        <div class="col-lg-12" id="ex1_Result2" ></div>

        <div id = "test2" style="width:100px; height:30px;"></div>
    </div>

</body>
</html>

<script>
        line = $('#line');
        var x1;
        var y1;
        var x2;
        var y2;
    // 테이블의 Row 클릭시 값 가져오기
		$("#table1 tr").click(function(e){

			var str = ""
			var tdArr = new Array();	// 배열 선언

			x1 = e.pageX;
			y1 = e.pageY;

			var test = x1+" "+ y1;
            document.getElementById("test").innerHTML = test;
			// 현재 클릭된 Row(<tr>)
			var tr = $(this);
			var td = tr.children();

			// tr.text()는 클릭된 Row 즉 tr에 있는 모든 값을 가져온다.
			console.log("클릭한 Row의 모든 데이터 : "+tr.text());

			// 반복문을 이용해서 배열에 값을 담아 사용할 수 도 있다.
			td.each(function(i){
				tdArr.push(td.eq(i).text());
			});

			console.log("배열에 담긴 값 : "+tdArr);

            // td.eq(index)를 통해 값을 가져옴
            var no = td.eq(0).text();
            var english_field = td.eq(1).text();
            var korean_field = td.eq(2).text();
            var length = td.eq(3).text();

            $("#ex1_Result1").html(" * 클릭한 Row의 모든 데이터 = " + tr.text());
		});

		// 테이블의 Row 클릭시 값 가져오기
		$("#table3 tr").click(function(e){

			var str = ""
			var tdArr = new Array();	// 배열 선언

            x2 = e.pageX;
			y2 = e.pageY;

			var test = x2+" "+ y2;
            document.getElementById("test2").innerHTML = test;

			// 현재 클릭된 Row(<tr>)
			var tr = $(this);
			var td = tr.children();

			// tr.text()는 클릭된 Row 즉 tr에 있는 모든 값을 가져온다.
			console.log("클릭한 Row의 모든 데이터 : "+tr.text());

			// 반복문을 이용해서 배열에 값을 담아 사용할 수 도 있다.
			td.each(function(i){
				tdArr.push(td.eq(i).text());
			});

			console.log("배열에 담긴 값 : "+tdArr);

			$("#ex1_Result2").html(" * 클릭한 Row의 모든 데이터 = " + tr.text());

		});


    function visibleTable(){
        table2.style.visibility="visible";
        table4.style.visibility="visible";
    }
    function drawLine(){
        line
        .attr('x1', x1)
        .attr('y1', y1)
        .attr('x2', x2)
        .attr('y2', y2)
    }

</script>